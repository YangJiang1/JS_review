<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #myBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 30px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: red;
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 10px;
        }
    </style>
</head>

<body>

    <button id="myBtn" title="回顶部">返回顶部</button>
    <div class="box">
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
        <p>123123213213213</p>
    </div>


    <script>
        class Utils {
            //兼容性的写法
            static getScroll() {
                if (window.pageYOffset != undefined) {
                    return {
                        left: window.pageXOffset,
                        top: window.pageYOffset
                    }
                } else if (document.compatMode === "CSS1Compat") {
                    return {
                        left: document.documentElement.scrollLeft,
                        top: document.documentElement.scrollTop
                    }
                }
                return {
                    left: document.body.scrollLeft,
                    top: document.body.scrollTop
                }
            }
        }
        //滚动条兼容性问题
        // window.pageXOffset IE9开始支持
        // document.documentElement.scrollLeft 声明了DTD的
        // document.body.scrollLeft 未声明DTD的
        // 重点掌握window.pageXOffset 现在不考虑兼容性问题 如果非要考虑 就用这个函数
        function getScroll() {
            return {
                left: window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0,
                top: window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0
            }
        }


        class BackTop {
            constructor(setting = {}) {
                this.el = document.querySelector(setting.el);
                this.clickHanlder();
                this.wheelHanlder();
            }
            clickHanlder() {
                this.el.onclick = function() {
                    var self = this;
                    this.timer = setInterval(function() {
                        //回到顶部 新的位置 = 当前位置 + 步长
                        //当前位置 Utils.getScroll().top
                        //步长 (目标-当前)/10
                        let current = Utils.getScroll().top;
                        let target = 0;
                        let steps = (target - current) / 10;
                        steps = steps > 0 ? Math.ceil(steps) : Math.floor(steps);
                        //新的位置 = 当前位置 + 步长
                        //给滚动条设置 scroll (y轴);
                        window.scroll(0, current + steps);
                        if (current === target) {
                            clearInterval(self.timer);
                        }
                    }, 30)

                }
            }
            wheelHanlder() {
                window.onscroll = () => {
                    let scrollHeight = Utils.getScroll().top;
                    this.el.style.display = scrollHeight > 1000 ? "block" : "none";
                }
            }
        }
        new BackTop({
            el: '#myBtn'
        })
    </script>
</body>

</html>